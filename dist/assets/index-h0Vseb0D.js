import{r as e,a,b as s}from"./vendor-2KnJ_jrg.js";import{u as t,L as r,a as n,b as o,R as i,c,B as l}from"./router-lOrOEvDf.js";import{z as d,W as m,C as x,a as u,L as p,B as g,X as h,A as b,b as f,D as y,G as j,U as N,H as v,P as w,T as _,c as C,M as S,d as D,e as E,f as P,g as k,h as $,i as I,E as A,j as F,k as L,l as T,m as G,n as z,o as U,F as M}from"./ui-Cewp0lBb.js";import{B as O,p as B,i as q,g as H,a as W,f as V,b as R,c as J}from"./ethers-BqGocQm3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();var Y={exports:{}},K={},Q=e,X=Symbol.for("react.element"),Z=Symbol.for("react.fragment"),ee=Object.prototype.hasOwnProperty,ae=Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,se={key:!0,ref:!0,__self:!0,__source:!0};function te(e,a,s){var t,r={},n=null,o=null;for(t in void 0!==s&&(n=""+s),void 0!==a.key&&(n=""+a.key),void 0!==a.ref&&(o=a.ref),a)ee.call(a,t)&&!se.hasOwnProperty(t)&&(r[t]=a[t]);if(e&&e.defaultProps)for(t in a=e.defaultProps)void 0===r[t]&&(r[t]=a[t]);return{$$typeof:X,type:e,key:n,ref:o,props:r,_owner:ae.current}}K.Fragment=Z,K.jsx=te,K.jsxs=te,Y.exports=K;var re=Y.exports,ne={},oe=a;ne.createRoot=oe.createRoot,ne.hydrateRoot=oe.hydrateRoot;const ie={chainId:8453,name:"Base",rpcUrl:"https://mainnet.base.org",blockExplorer:"https://basescan.org",nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18},color:"#0052FF",enabled:!0},ce=[ie,{chainId:84532,name:"Base Sepolia",rpcUrl:"https://sepolia.base.org",blockExplorer:"https://sepolia.basescan.org",nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18},color:"#0052FF",enabled:!1}].filter(e=>e.enabled),le="splitpay-groups",de="MetaMask no estÃ¡ instalado. Por favor, instala MetaMask para continuar.",me="ConexiÃ³n cancelada por el usuario.",xe="ConexiÃ³n ya en progreso. Por favor, espera.",ue="Red no soportada. Por favor, cambia a la red Base.",pe="Error al conectar wallet:",ge="Agregar red cancelado por el usuario.",he="Error al agregar la red:",be="Este participante ya estÃ¡ en el grupo.",fe="Pago no encontrado.",ye="Wallet conectada en",je="Wallet desconectada.",Ne="Cambiado a",ve="agregada exitosamente.",we="Grupo creado exitosamente.",_e="Gasto agregado.",Ce="Gasto eliminado.",Se="Gasto cancelado.",De="Grupo actualizado.",Ee="Grupo eliminado.",Pe="Nombre agregado para",ke="Pago creado.",$e="Pago marcado como completado.",Ie=e.createContext(void 0),Ae=({children:a})=>{const[s,t]=e.useState(null),[r,n]=e.useState(null),[o,i]=e.useState(null),[c,l]=e.useState(null),[m,x]=e.useState(!1),u=!!s&&!!o,p=ce.find(e=>e.chainId===r)||null,g=r===ie.chainId,h=e.useCallback(e=>e?`${e.slice(0,6)}...${e.slice(-4)}`:"",[]),b=e.useCallback(e=>{const a=ce.find(a=>a.chainId===e);return a?.name||`Chain ${e}`},[]),f=e.useCallback(e=>ce.some(a=>a.chainId===e&&a.enabled),[]),y=e.useCallback((e="default")=>{if("undefined"==typeof window)return null;switch(e){case"metamask":return window.ethereum?.isMetaMask?window.ethereum:null;case"rabby":return window.ethereum?.isRabby?window.ethereum:null;case"coinbase":return window.ethereum?.isCoinbaseWallet?window.ethereum:null;case"trust":return window.ethereum?.isTrust?window.ethereum:null;default:return window.ethereum}},[]),j=e.useCallback(async(e="default")=>{const a=y(e);if(a){x(!0);try{const e=new O(a),s=await e.send("eth_requestAccounts",[]);if(0===s.length)throw new Error("No se encontraron cuentas");const r=await e.getSigner(),o=await e.getNetwork(),c=Number(o.chainId);if(!f(c))return d.error(`${ue} ${b(c)}`),void(await v(ie.chainId));i(e),l(r),t(s[0]),n(c),d.success(`${ye} ${b(c)}`),console.log("ðŸ”— Wallet conectada:",{address:s[0],network:b(c),chainId:c})}catch(s){if(console.error("Error connecting wallet:",s),"object"==typeof s&&null!==s&&"code"in s){const e=s.code;4001===e?d.error(me):-32002===e?d.error(xe):d.error(`${pe} ${String(s)}`)}else d.error(`${pe} ${String(s)}`)}finally{x(!1)}}else d.error(de)},[f,b,y]),N=e.useCallback(()=>{t(null),n(null),i(null),l(null),d.success(je),console.log("ðŸ”Œ Wallet desconectada")},[]),v=e.useCallback(async e=>{if(!window.ethereum)return void d.error(de);const a=ce.find(a=>a.chainId===e);if(a)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${e.toString(16)}`}]}),d.success(`${Ne} ${a.name}`)}catch(s){"object"==typeof s&&null!==s&&"code"in s&&4902===s.code?await w(e):(console.error("Error switching network:",s),d.error(`Error al cambiar a ${a.name}`))}else d.error(ue)},[]),w=e.useCallback(async e=>{if(!window.ethereum)return;const a=ce.find(a=>a.chainId===e);if(a)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${e.toString(16)}`,chainName:a.name,rpcUrls:[a.rpcUrl],blockExplorerUrls:[a.blockExplorer],nativeCurrency:a.nativeCurrency}]}),d.success(`${a.name} ${ve}`)}catch(s){console.error("Error adding network:",s),"object"==typeof s&&null!==s&&"code"in s&&4001===s.code?d.error(ge):d.error(`${he} ${a.name}`)}else d.error(ue)},[]);e.useEffect(()=>{if(!window.ethereum)return;const e=new O(window.ethereum);(async()=>{try{const a=await e.send("eth_accounts",[]);if(a.length>0){const s=await e.getNetwork(),r=Number(s.chainId);if(f(r)){t(a[0]),n(r),i(e);const s=await e.getSigner();l(s)}}}catch(a){console.error("Error checking connection:",a)}})();const a=e=>{0===e.length?N():(t(e[0]),d("Cuenta cambiada",{icon:"â„¹ï¸"}))},s=e=>{const a=Number(e);n(a),f(a)?d.success(`${Ne} ${b(a)}`):d.error(`${ue} ${b(a)}`),setTimeout(()=>window.location.reload(),1e3)},r=e=>{console.log("ðŸ”— Wallet conectada:",e)},o=e=>{console.log("ðŸ”Œ Wallet desconectada:",e),N()};return window.ethereum.on("accountsChanged",a),window.ethereum.on("chainChanged",s),window.ethereum.on("connect",r),window.ethereum.on("disconnect",o),()=>{window.ethereum?.removeListener&&(window.ethereum.removeListener("accountsChanged",a),window.ethereum.removeListener("chainChanged",s),window.ethereum.removeListener("connect",r),window.ethereum.removeListener("disconnect",o))}},[N,f,b,v]);const _=e.useMemo(()=>({account:s,chainId:r,provider:o,signer:c,isConnected:u,isLoading:m,currentNetwork:p,supportedNetworks:ce,isBaseNetwork:g,connectWallet:j,disconnectWallet:N,switchNetwork:v,addNetwork:w,formatAddress:h,getNetworkName:b,isNetworkSupported:f}),[s,r,o,c,u,m,p,g,j,N,v,w,h,b,f]);return re.jsx(Ie.Provider,{value:_,children:a})},Fe=()=>{const a=e.useContext(Ie);if(void 0===a)throw new Error("useWeb3 must be used within a Web3Provider");return a},Le=(e,a,s,t,r,n,o)=>({id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,groupId:a,groupName:s,message:t,amount:n,from:o,to:r,timestamp:(new Date).toISOString(),read:!1}),Te=(e,a)=>{const s=`notifications_${e.toLowerCase()}`,t=JSON.parse(localStorage.getItem(s)||"[]");t.push(a),localStorage.setItem(s,JSON.stringify(t))},Ge=(e,a)=>{const s={};e.participants.forEach(e=>s[e]=0),e.expenses.filter(e=>"active"===e.status).forEach(a=>{const t=a.amount/e.participants.length;e.participants.forEach(e=>{e.toLowerCase()===a.paidBy.toLowerCase()?s[e]+=a.amount-t:s[e]-=t})}),e.payments.filter(e=>"completed"===e.status).forEach(e=>{s[e.from]+=e.amount,s[e.to]-=e.amount});const t=[],r=[],n=[];for(const d in s)s[d]>0?r.push({address:d,amount:s[d]}):s[d]<0&&n.push({address:d,amount:Math.abs(s[d])});let o=0,i=0;for(;o<r.length&&i<n.length;){const e=r[o],a=n[i],s=Math.min(e.amount,a.amount);s>.01&&t.push({from:a.address,to:e.address,amount:s}),e.amount-=s,a.amount-=s,e.amount<=.01&&o++,a.amount<=.01&&i++}const c=t.filter(e=>e.from.toLowerCase()===a.toLowerCase()).reduce((e,a)=>e+a.amount,0),l=t.filter(e=>e.to.toLowerCase()===a.toLowerCase()).reduce((e,a)=>e+a.amount,0);return{debts:t,userOwes:c,userIsOwed:l}},ze=e.createContext(void 0),Ue=({children:a})=>{const[s,t]=e.useState([]),[r,n]=e.useState(null),[o,i]=e.useState(!1);e.useEffect(()=>{const e=()=>{try{const e=((e,a)=>{try{const s=localStorage.getItem(e);return s?JSON.parse(s):a}catch(s){return console.error("Error loading from localStorage:",s),a}})(le,[]);t(e),console.log("ðŸ“ Grupos cargados:",e.length)}catch(e){console.error("Error loading groups:",e),d.error(pe)}};e();const a=()=>{e()};window.addEventListener("storage",a);const s=setInterval(e,1e3);return()=>{window.removeEventListener("storage",a),clearInterval(s)}},[]);const c=e.useCallback(e=>{try{((e,a)=>{try{localStorage.setItem(e,JSON.stringify(a))}catch(s){console.error("Error saving to localStorage:",s)}})(le,e),t(e)}catch(a){console.error("Error saving groups:",a),d.error(pe)}},[]),l=e.useCallback(async e=>{i(!0);try{const a={...e,id:`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:(new Date).toISOString(),startDate:(new Date).toISOString(),currency:"USDC",divisionMethod:"equal",status:"active",expenses:[],payments:[],totalAmount:0,participantNames:{}},t=[...s,a];return c(t),d.success(`${we} "${a.name}"`),console.log("âœ… Grupo creado:",a.name),!0}catch(a){return console.error("Error creating group:",a),d.error("Error al crear el grupo"),!1}finally{i(!1)}},[s,c]),m=e.useCallback(async(e,a)=>{i(!0);try{const t=s.map(s=>{if(s.id===e){const t={...a,id:`expense_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:(new Date).toISOString(),status:"active",groupId:e};return s.participants.forEach(e=>{if(e.toLowerCase()!==t.paidBy.toLowerCase()){const a=Le("expense_added",s.id,s.name,`Se ha aÃ±adido un gasto de ${t.amount.toFixed(2)} USDC en "${s.name}"`,e,t.amount,t.paidBy);Te(e,a)}}),{...s,expenses:[...s.expenses,t],totalAmount:s.totalAmount+(t.amount||0)}}return s});return c(t),d.success(`${_e} "${a.description}"`),console.log("ðŸ’° Gasto agregado:",a.description),!0}catch(t){return console.error("Error adding expense:",t),d.error(pe),!1}finally{i(!1)}},[s,c]),x=e.useCallback(async(e,a)=>{i(!0);try{const t=s.map(s=>{if(s.id===e){const e=s.expenses.find(e=>e.id===a);return e?{...s,expenses:s.expenses.filter(e=>e.id!==a),totalAmount:s.totalAmount-(e.amount||0)}:s}return s});return c(t),d.success(Ce),console.log("ðŸ—‘ï¸ Gasto eliminado:",a),!0}catch(t){return console.error("Error deleting expense:",t),d.error(pe),!1}finally{i(!1)}},[s,c]),u=e.useCallback(async(e,a)=>{i(!0);try{const t=s.map(s=>{if(s.id===e){if(!s.expenses.find(e=>e.id===a))return s;const e=s.expenses.map(e=>e.id===a?{...e,status:"cancelled"}:e);return{...s,expenses:e}}return s});return c(t),d.success(Se),console.log("âŒ Gasto cancelado:",a),!0}catch(t){return console.error("Error cancelling expense:",t),d.error(pe),!1}finally{i(!1)}},[s,c]),p=e.useCallback(async e=>{try{const a=s.find(a=>a.id===e);return a?(n(a),a):null}catch(a){return console.error("Error getting group:",a),null}},[s]),g=e.useCallback(async(e,a)=>{i(!0);try{const t=s.map(s=>s.id===e?{...s,...a}:s);return c(t),d.success(De),console.log("ðŸ”„ Grupo actualizado:",e),!0}catch(t){return console.error("Error updating group:",t),d.error(pe),!1}finally{i(!1)}},[s,c]),h=e.useCallback(async e=>{i(!0);try{const a=s.filter(a=>a.id!==e);return c(a),d.success(Ee),console.log("ðŸ—‘ï¸ Grupo eliminado:",e),!0}catch(a){return console.error("Error deleting group:",a),d.error(pe),!1}finally{i(!1)}},[s,c]),b=e.useCallback(async(e,a)=>{i(!0);try{const t=s.map(s=>s.id===e?s.participants.includes(a.address)?(d.error(be),s):{...s,participants:[...s.participants,a.address],participantNames:{...s.participantNames,[a.address.toLowerCase()]:a.name||a.address}}:s);return c(t),d.success("Participante agregado exitosamente"),!0}catch(t){return console.error("Error adding participant:",t),d.error(pe),!1}finally{i(!1)}},[s,c]),f=e.useCallback(async(e,a,t)=>{i(!0);try{const r=s.map(s=>s.id===e?{...s,participantNames:{...s.participantNames,[a.toLowerCase()]:t}}:s);return c(r),d.success(`${Pe} "${t}" para ${a.slice(0,6)}...${a.slice(-4)}`),!0}catch(r){return console.error("Error adding participant name:",r),d.error(pe),!1}finally{i(!1)}},[s,c]),y=e.useCallback((e,a)=>{const t=s.find(a=>a.id===e);return t&&t.participantNames&&t.participantNames[a.toLowerCase()]||`${a.slice(0,6)}...${a.slice(-4)}`},[s]),j=e.useCallback(async(e,a,t,r)=>{i(!0);try{const n=s.map(s=>{if(s.id===e){const e={id:`payment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,from:a,to:t,amount:r,status:"pending",createdAt:(new Date).toISOString()};return{...s,payments:[...s.payments,e]}}return s});return c(n),d.success(ke),!0}catch(n){return console.error("Error creating payment:",n),d.error(pe),!1}finally{i(!1)}},[s,c]),N=e.useCallback(async(e,a,t,r)=>{i(!0);try{const n=s.map(s=>{if(s.id===e){const e=s.payments.find(e=>e.id===a);if(!e)return d.error(fe),s;const n=s.payments.map(e=>e.id===a?{...e,status:"completed",transactionHash:t,completedAt:(new Date).toISOString(),completedBy:r}:e),o=Le("payment_completed",s.id,s.name,`Â¡Has recibido un pago de ${e.amount.toFixed(2)} USDC de ${y(s.id,e.from)} en "${s.name}"!`,e.to,e.amount,e.from);return Te(e.to,o),{...s,payments:n}}return s});return c(n),d.success($e),console.log("âœ… Pago completado:",a),!0}catch(n){return console.error("Error completing payment:",n),d.error(pe),!1}finally{i(!1)}},[s,c,y]),v=e.useCallback((e,a)=>{const t=s.find(a=>a.id===e);return t?t.payments.filter(e=>e.from.toLowerCase()===a.toLowerCase()&&"pending"===e.status):[]},[s]),w=e.useCallback(e=>{const a=s.find(a=>a.id===e);return a?a.payments.sort((e,a)=>new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime()):[]},[s]),_=e.useCallback(e=>s.filter(a=>a.participants.some(a=>a.toLowerCase()===e.toLowerCase())),[s]),C=e.useCallback((e,a)=>{const t=s.find(a=>a.id===e);if(!t)return 0;const{userOwes:r}=Ge(t,a);return r},[s]),S=e.useCallback(e=>{const a=_(e),s=[];return a.forEach(a=>{const{userOwes:t}=Ge(a,e);t>0&&s.push({groupId:a.id,groupName:a.name,amount:t})}),s},[_]),D=e.useMemo(()=>({groups:s,currentGroup:r,isLoading:o,createGroup:l,addExpense:m,deleteExpense:x,cancelExpense:u,completePayment:N,getGroup:p,updateGroup:g,deleteGroup:h,addParticipant:b,addParticipantName:f,getParticipantName:y,createPayment:j,getPendingPayments:v,getPaymentHistory:w,getGroupsByParticipant:_,getTotalOwed:C,getParticipantDebts:S}),[s,r,o,l,m,x,u,N,p,g,h,b,f,y,j,v,w,_,C,S]);return re.jsx(ze.Provider,{value:D,children:a})},Me=()=>{const a=e.useContext(ze);if(void 0===a)throw new Error("useGroups must be used within a GroupProvider");return a},Oe={es:{"common.cancel":"Cancelar","common.save":"Guardar","common.loading":"Cargando...","common.processing":"Procesando...","common.error":"Error","common.success":"Ã‰xito","common.copy":"Copiar","common.back":"Volver","common.create":"Crear","common.creating":"Creando...","nav.dashboard":"Dashboard","nav.create_group":"Crear Grupo","nav.back_dashboard":"Volver al Dashboard","app.name":"SplitPay","app.copyright":"Â© 2024 SplitPay","payment.pay":"Pagar","payment.complete":"Completar Pago","payment.transaction_hash":"Hash de TransacciÃ³n","payment.transaction_hash_required":"Por favor ingresa el hash de la transacciÃ³n","payment.transaction_hash_invalid":"Por favor ingresa un hash de transacciÃ³n vÃ¡lido (0x...)","payment.transaction_hash_invalid_format":"Por favor ingresa un hash de transacciÃ³n vÃ¡lido (0x + 64 caracteres)","payment.validate_success":"âœ… TransacciÃ³n validada correctamente","payment.validate_failed":"TransacciÃ³n invÃ¡lida","payment.completed_success":"Â¡Pago completado!","payment.enter_hash":"Ingresa el hash de la transacciÃ³n","payment.verification":"VerificaciÃ³n de Pago","payment.verification_desc":"Una vez completado, el saldo se actualizarÃ¡ automÃ¡ticamente y se notificarÃ¡ a todos los participantes.","payment.details":"Detalles del Pago","payment.verify_transaction":"Puedes verificar la transacciÃ³n en","instructions.title":"Instrucciones:","instructions.step1":"1. Realiza la transacciÃ³n en tu wallet","instructions.step2":"2. Copia el hash de la transacciÃ³n","instructions.step3":"3. PÃ©galo en el campo de arriba","instructions.step4":'4. Haz clic en "Completar Pago"',"debt.cancel":"Cancelar Deuda","debt.cancel_tooltip":"Cancelar deuda con este participante","debt.cancel_specific":"Cancelar Su Deuda","debt.cancel_specific_tooltip":"Cancelar deuda de este participante","debt.pay_instruction":'1. Haz clic en "Pagar" para la deuda que quieres saldar',"participants.add_address":"Por favor ingresa una direcciÃ³n Ethereum vÃ¡lida (0x...)","participants.add_name":"Por favor ingresa un nombre","participants.name_label":"Nombre del participante","participants.name_placeholder":"Ej: Juan PÃ©rez","participants.wallet_label":"DirecciÃ³n de wallet","participants.wallet_placeholder":"0x...","participants.wallet_helper":"DirecciÃ³n Ethereum completa (0x + 40 caracteres)","participants.add_button":"+ Agregar","participants.adding":"Agregando...","dashboard.title":"Dashboard","dashboard.tip":"ðŸ’¡ Tip: AsegÃºrate de estar conectado a la red Base para usar SplitPay.","dashboard.create_group":"Crear Grupo","dashboard.connect_wallet":"Conecta tu Wallet","dashboard.connect_description":"Conecta tu wallet de Base para comenzar a dividir gastos con tus amigos.","dashboard.manage_expenses":"Gestiona tus gastos compartidos en Base","dashboard.create_first_group":"Crea tu primer grupo para comenzar a dividir gastos con tus amigos.","dashboard.active_groups":"Grupos Activos","dashboard.total_spent":"Total Gastado","dashboard.registered_expenses":"Gastos Registrados","dashboard.my_groups":"Mis Grupos","dashboard.groups_count":"grupos","group.status_active":"Activo","group.participants_label":"participantes","group.total_spent":"Total Gastado","group.expenses_label":"Gastos","group.view_details":"Ver Detalles","group.division":"DivisiÃ³n","group.division_equal":"equal","group.connect_wallet":"Conecta tu Wallet","group.connect_description":"Necesitas conectar tu wallet para ver los detalles del grupo.","group.add_first_expense":"Agrega el primer gasto para comenzar a dividir los costos.","group.add_expense":"Agregar Gasto","group.delete_group":"Eliminar Grupo","group.edit_name":"Editar nombre","group.cancel_debt":"Cancelar Deuda","group.cancel_debt_tooltip":"Cancelar deuda con este participante","group.cancel_specific_debt":"Cancelar Su Deuda","group.cancel_specific_debt_tooltip":"Cancelar deuda de este participante","group.add_first_expense_button":"Agregar Primer Gasto","group.paid_by":"Pagado por","group.cancel_expense":"Cancelar gasto","group.delete_expense":"Eliminar gasto","group.amount_usd":"Monto (USD)","group.adding_expense":"Agregando...","common.you":"TÃº","common.participant":"Participante","debt.my_debts":"Mis Deudas","debt.summary_pending":"Resumen de pagos pendientes","debt.you_owe":"Debes","debt.they_owe_you":"Te deben","debt.all_up_to_date":"Â¡Todo al dÃ­a!","debt.no_pending_debts":"No tienes deudas pendientes en este grupo","payment.how_it_works":"Â¿CÃ³mo funciona el pago?","payment.step1":'Haz clic en "Pagar" para la deuda que quieres saldar',"payment.step2":"Realiza la transacciÃ³n en tu wallet","payment.step3":"Copia el hash de la transacciÃ³n","payment.step4":"PÃ©galo en el formulario y confirma","payment.step5":"Â¡La deuda se marcarÃ¡ como pagada automÃ¡ticamente!","expenses.title":"Gastos","expenses.no_expenses":"No hay gastos aÃºn","expenses.add_first":"Agrega el primer gasto para comenzar a dividir los costos.","expenses.add_first_button":"Agregar Primer Gasto","payment.history_title":"Historial de Pagos","payment.no_payments":"No hay pagos registrados","payment.will_appear":"Los pagos aparecerÃ¡n aquÃ­ cuando se agreguen gastos","balance.in_balance":"En balance","notifications.title":"Notificaciones","notifications.clear_all":"Limpiar todo","notifications.payment_received":'Â¡Has recibido un pago de {amount} USDC de {from} en "{group}"!',"notifications.expense_added":'Se ha aÃ±adido un gasto de {amount} USDC en "{group}"',"notifications.time_ago":"Hace {time}h","notifications.just_now":"Hace un momento","notifications.minutes_ago":"Hace {time} min","create.connect_wallet":"Conecta tu Wallet","create.connect_description":"Necesitas conectar tu wallet para crear un grupo.","create.description":"Crea un grupo para dividir gastos con tus amigos usando USDC en Base Network.","debt.connect_wallet":"Conecta tu Wallet","debt.connect_description":"Necesitas conectar tu wallet para ver las deudas","ui.no_groups":"No tienes grupos aÃºn","ui.no_expenses":"No hay gastos aÃºn","ui.create_new_group":"Crear Nuevo Grupo","ui.basic_info":"InformaciÃ³n bÃ¡sica","ui.participants":"Participantes","ui.add_participant":"Agregar Participante","ui.participants_and_balances":"Participantes y Saldos","ui.participants_count":"Participantes:","ui.group_info":"InformaciÃ³n del Grupo","ui.group_name":"Nombre del Grupo","ui.description":"DescripciÃ³n","ui.category":"CategorÃ­a","ui.start_new_group":"Inicia un nuevo grupo de gastos","ui.no_participants":"No hay participantes agregados","ui.add_min_participants":"Agrega al menos un participante para crear el grupo","ui.remove_participant":"Eliminar participante","footer.powered_by":"Powered by Base Network","footer.copyright":"Â© 2024 SplitPay","footer.shared_expenses":"Gastos Compartidos en Base","footer.created_by":"Creado por","footer.secure_transactions":"Transacciones seguras en Base","footer.usdc_stable":"USDC como moneda estable","footer.made_with":"Hecho con","footer.for_community":"para la comunidad Base","placeholder.group_name":"Ej: Viaje a Barcelona","placeholder.description":"Describe el propÃ³sito del grupo...","config.title":"ConfiguraciÃ³n","config.split_method":"MÃ©todo de divisiÃ³n","config.equal_split":"DivisiÃ³n igual","config.start_date":"Fecha de inicio","config.end_date":"Fecha de fin (opcional)","config.date_format":"dd/mm/aaaa","category.general":"General","category.travel":"Viaje","category.food":"Comida","category.entertainment":"Entretenimiento","category.services":"Servicios","category.other":"Otro","instructions.auto_include":"TÃº estÃ¡s incluido automÃ¡ticamente como participante","instructions.add_addresses":"Agrega las direcciones de wallet de tus amigos","instructions.min_participants":"MÃ­nimo 2 participantes para crear el grupo","language.spanish":"EspaÃ±ol","language.english":"English","language.select":"Idioma"},en:{"common.cancel":"Cancel","common.save":"Save","common.loading":"Loading...","common.processing":"Processing...","common.error":"Error","common.success":"Success","common.copy":"Copy","common.back":"Back","common.create":"Create","common.creating":"Creating...","nav.dashboard":"Dashboard","nav.create_group":"Create Group","nav.back_dashboard":"Back to Dashboard","app.name":"SplitPay","app.copyright":"Â© 2024 SplitPay","payment.pay":"Pay","payment.complete":"Complete Payment","payment.transaction_hash":"Transaction Hash","payment.transaction_hash_required":"Please enter the transaction hash","payment.transaction_hash_invalid":"Please enter a valid transaction hash (0x...)","payment.transaction_hash_invalid_format":"Please enter a valid transaction hash (0x + 64 characters)","payment.validate_success":"âœ… Transaction validated successfully","payment.validate_failed":"Invalid transaction","payment.completed_success":"Payment completed successfully!","payment.enter_hash":"Enter the transaction hash","payment.verification":"Payment Verification","payment.verification_desc":"Once completed, the balance will be updated automatically and all participants will be notified.","payment.details":"Payment Details","payment.verify_transaction":"You can verify the transaction on","instructions.title":"Instructions:","instructions.step1":"1. Make the transaction in your wallet","instructions.step2":"2. Copy the transaction hash","instructions.step3":"3. Paste it in the field above","instructions.step4":'4. Click "Complete Payment"',"debt.cancel":"Cancel Debt","debt.cancel_tooltip":"Cancel debt with this participant","debt.cancel_specific":"Cancel Their Debt","debt.cancel_specific_tooltip":"Cancel this participant's debt","debt.pay_instruction":'1. Click "Pay" for the debt you want to settle',"participants.add_address":"Please enter a valid Ethereum address (0x...)","participants.add_name":"Please enter a name","participants.name_label":"Participant Name","participants.name_placeholder":"E.g: John Doe","participants.wallet_label":"Wallet Address","participants.wallet_placeholder":"0x...","participants.wallet_helper":"Complete Ethereum address (0x + 40 characters)","participants.add_button":"+ Add","participants.adding":"Adding...","dashboard.title":"Dashboard","dashboard.tip":"ðŸ’¡ Tip: Make sure you're connected to Base network to use SplitPay.","dashboard.create_group":"Create Group","dashboard.connect_wallet":"Connect Your Wallet","dashboard.connect_description":"Connect your Base wallet to start splitting expenses with your friends.","dashboard.manage_expenses":"Manage your shared expenses on Base","dashboard.create_first_group":"Create your first group to start splitting expenses with your friends.","dashboard.active_groups":"Active Groups","dashboard.total_spent":"Total Spent","dashboard.registered_expenses":"Registered Expenses","dashboard.my_groups":"My Groups","dashboard.groups_count":"groups","group.status_active":"Active","group.participants_label":"participants","group.total_spent":"Total Spent","group.expenses_label":"Expenses","group.view_details":"View Details","group.division":"Division","group.division_equal":"equal","group.connect_wallet":"Connect Your Wallet","group.connect_description":"You need to connect your wallet to view group details.","group.add_first_expense":"Add the first expense to start splitting costs.","group.add_expense":"Add Expense","group.delete_group":"Delete Group","group.edit_name":"Edit name","group.cancel_debt":"Cancel Debt","group.cancel_debt_tooltip":"Cancel debt with this participant","group.cancel_specific_debt":"Cancel Their Debt","group.cancel_specific_debt_tooltip":"Cancel this participant's debt","group.add_first_expense_button":"Add First Expense","group.paid_by":"Paid by","group.cancel_expense":"Cancel expense","group.delete_expense":"Delete expense","group.amount_usd":"Amount (USD)","group.adding_expense":"Adding...","common.you":"You","common.participant":"Participant","debt.my_debts":"My Debts","debt.summary_pending":"Summary of pending payments","debt.you_owe":"You Owe","debt.they_owe_you":"They Owe You","debt.all_up_to_date":"All up to date!","debt.no_pending_debts":"You have no pending debts in this group","payment.how_it_works":"How does the payment work?","payment.step1":'Click "Pay" for the debt you want to settle',"payment.step2":"Perform the transaction in your wallet","payment.step3":"Copy the transaction hash","payment.step4":"Paste it in the form and confirm","payment.step5":"The debt will be marked as paid automatically!","expenses.title":"Expenses","expenses.no_expenses":"No expenses yet","expenses.add_first":"Add the first expense to start splitting costs.","expenses.add_first_button":"Add First Expense","payment.history_title":"Payment History","payment.no_payments":"No payments registered","payment.will_appear":"Payments will appear here when expenses are added","balance.in_balance":"In balance","notifications.title":"Notifications","notifications.clear_all":"Clear all","notifications.payment_received":'You have received a payment of {amount} USDC from {from} in "{group}"!',"notifications.expense_added":'An expense of {amount} USDC has been added in "{group}"',"notifications.time_ago":"{time}h ago","notifications.just_now":"Just now","notifications.minutes_ago":"{time} min ago","create.connect_wallet":"Connect Your Wallet","create.connect_description":"You need to connect your wallet to create a group.","create.description":"Create a group to split expenses with your friends using USDC on Base Network.","debt.connect_wallet":"Connect Your Wallet","debt.connect_description":"You need to connect your wallet to view debts","ui.no_groups":"You don't have any groups yet","ui.no_expenses":"No expenses yet","ui.create_new_group":"Create New Group","ui.basic_info":"Basic Information","ui.participants":"Participants","ui.add_participant":"Add Participant","ui.participants_and_balances":"Participants and Balances","ui.participants_count":"Participants:","ui.group_info":"Group Information","ui.group_name":"Group Name","ui.description":"Description","ui.category":"Category","ui.start_new_group":"Start a new expense group","ui.no_participants":"No participants added","ui.add_min_participants":"Add at least one participant to create the group","ui.remove_participant":"Remove participant","footer.powered_by":"Powered by Base Network","footer.copyright":"Â© 2024 SplitPay","footer.shared_expenses":"Shared Expenses on Base","footer.created_by":"Created by","footer.secure_transactions":"Secure Transactions on Base","footer.usdc_stable":"USDC as Stable Currency","footer.made_with":"Made with","footer.for_community":"for the Base community","placeholder.group_name":"E.g: Trip to Barcelona","placeholder.description":"Describe the purpose of the group...","config.title":"Configuration","config.split_method":"Split Method","config.equal_split":"Equal Split","config.start_date":"Start Date","config.end_date":"End Date (optional)","config.date_format":"dd/mm/yyyy","category.general":"General","category.travel":"Travel","category.food":"Food","category.entertainment":"Entertainment","category.services":"Services","category.other":"Other","instructions.auto_include":"You are automatically included as a participant","instructions.add_addresses":"Add your friends' wallet addresses","instructions.min_participants":"Minimum 2 participants to create the group","language.spanish":"EspaÃ±ol","language.english":"English","language.select":"Language"}},Be=e.createContext(void 0),qe=({children:a})=>{const[s,t]=e.useState("es");e.useEffect(()=>{const e=localStorage.getItem("splitpay-language");!e||"es"!==e&&"en"!==e||t(e)},[]);const r=e=>Oe[s][e]||e,n={language:s,setLanguage:e=>{t(e),localStorage.setItem("splitpay-language",e)},t:r,translateNotification:(e,a={})=>{let s=r(e);return Object.entries(a).forEach(([e,a])=>{s=s.replace(`{${e}}`,String(a))}),s}};return re.jsx(Be.Provider,{value:n,children:a})},He=()=>{const a=e.useContext(Be);if(void 0===a)throw new Error("useLanguage must be used within a LanguageProvider");return a},We=()=>{const{account:a,isConnected:s,isLoading:t,connectWallet:r,disconnectWallet:n,formatAddress:o,currentNetwork:i}=Fe(),[c,l]=e.useState(!1);return t?re.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-base-100 rounded-lg",children:[re.jsx("div",{className:"w-4 h-4 border-2 border-base-500 border-t-transparent rounded-full animate-spin"}),re.jsx("span",{className:"text-sm text-base-700",children:"Conectando..."})]}):s?re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-base-100 rounded-lg",children:[re.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:i?.color||"#0052FF"}}),re.jsx("span",{className:"text-sm font-medium text-base-700",children:i?.name||"Base"})]}),re.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-base-100 rounded-lg",children:[re.jsx("span",{className:"text-sm font-mono text-base-700",children:o(a||"")}),re.jsx("button",{onClick:async()=>{if(a)try{await navigator.clipboard.writeText(a),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){console.error("Error copying address:",e)}},className:"p-1 hover:bg-base-200 rounded transition-colors",title:"Copiar direcciÃ³n",children:c?re.jsx(x,{className:"w-4 h-4 text-green-600"}):re.jsx(u,{className:"w-4 h-4 text-base-600"})})]}),re.jsx("button",{onClick:n,className:"p-2 hover:bg-base-200 rounded-lg transition-colors",title:"Desconectar",children:re.jsx(p,{className:"w-4 h-4 text-base-600"})})]}):re.jsxs("button",{onClick:()=>r(),className:"flex items-center space-x-2 px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors",children:[re.jsx(m,{className:"w-4 h-4"}),re.jsx("span",{className:"text-sm font-medium",children:"Conectar Wallet"})]})},Ve=()=>{const{account:a,isConnected:s}=Fe(),{getParticipantDebts:t,getGroupsByParticipant:r}=Me(),[n,o]=e.useState([]),[i,c]=e.useState(!1),[l,d]=e.useState(0);e.useEffect(()=>{s&&a?m():(o([]),d(0))},[s,a]);const m=()=>{if(!a)return;const e=r(a),s=[];e.forEach(e=>{const r=t(a).find(a=>a.groupId===e.id);r&&r.amount>0&&s.push({id:`debt_${e.id}`,type:"debt_reminder",groupId:e.id,groupName:e.name,message:`Tienes una deuda pendiente de $${r.amount.toFixed(2)} USDC`,amount:r.amount,timestamp:(new Date).toISOString(),read:!1})});const n=localStorage.getItem(`notifications_${a}`);if(n){const e=JSON.parse(n);s.push(...e)}o(s),d(s.filter(e=>!e.read).length)},x=e=>{const a=new Date(e),s=(new Date).getTime()-a.getTime();return s<6e4?"Hace un momento":s<36e5?`Hace ${Math.floor(s/6e4)} min`:s<864e5?`Hace ${Math.floor(s/36e5)} h`:a.toLocaleDateString()},u=e=>{switch(e){case"payment_created":return re.jsx(y,{className:"w-4 h-4 text-blue-600"});case"payment_completed":return re.jsx(f,{className:"w-4 h-4 text-green-600"});case"debt_reminder":return re.jsx(b,{className:"w-4 h-4 text-red-600"});case"payment_request":return re.jsx(g,{className:"w-4 h-4 text-orange-600"});default:return re.jsx(g,{className:"w-4 h-4 text-gray-600"})}};return s?re.jsx("div",{className:"fixed top-4 right-4 z-50",children:re.jsxs("div",{className:"relative",children:[re.jsxs("button",{onClick:()=>c(!i),className:"relative p-3 bg-white rounded-full shadow-lg border border-gray-200 hover:shadow-xl transition-shadow",children:[re.jsx(g,{className:"w-6 h-6 text-gray-700"}),l>0&&re.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l})]}),i&&re.jsxs("div",{className:"absolute right-0 top-16 w-80 bg-white rounded-xl shadow-xl border border-gray-200 max-h-96 overflow-y-auto",children:[re.jsx("div",{className:"p-4 border-b border-gray-200",children:re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsx("h3",{className:"font-semibold text-gray-900",children:"Notificaciones"}),re.jsxs("div",{className:"flex items-center space-x-2",children:[l>0&&re.jsx("button",{onClick:()=>{o([]),d(0),a&&localStorage.removeItem(`notifications_${a}`)},className:"text-xs text-gray-500 hover:text-gray-700",children:"Limpiar todo"}),re.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:re.jsx(h,{size:16})})]})]})}),re.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.map(e=>re.jsx("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer "+(e.read?"":"bg-blue-50"),onClick:()=>(e=>{if(o(a=>a.map(a=>a.id===e?{...a,read:!0}:a)),d(e=>Math.max(0,e-1)),a){const s=n.map(a=>a.id===e?{...a,read:!0}:a);localStorage.setItem(`notifications_${a}`,JSON.stringify(s))}})(e.id),children:re.jsxs("div",{className:"flex items-start space-x-3",children:[re.jsx("div",{className:"flex-shrink-0 mt-1",children:u(e.type)}),re.jsxs("div",{className:"flex-1 min-w-0",children:[re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.groupName}),re.jsx("span",{className:"text-xs text-gray-500",children:x(e.timestamp)})]}),re.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),e.amount&&re.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:["$",e.amount.toFixed(2)," USDC"]})]}),!e.read&&re.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]})},e.id))}),0===n.length&&re.jsxs("div",{className:"p-8 text-center text-gray-500",children:[re.jsx(g,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),re.jsx("p",{children:"No hay notificaciones"})]})]})]})}):null},Re=()=>{const{language:e,setLanguage:a,t:s}=He();return re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx(j,{className:"w-4 h-4 text-gray-600"}),re.jsxs("select",{value:e,onChange:e=>{return s=e.target.value,void a(s);var s},className:"text-sm border border-gray-300 rounded-lg px-2 py-1 bg-white hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[re.jsx("option",{value:"es",children:s("language.spanish")}),re.jsx("option",{value:"en",children:s("language.english")})]})]})},Je=({children:e})=>{const a=t(),{t:s}=He(),n=e=>a.pathname===e;return re.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-base-50 to-base-100",children:[re.jsx("header",{className:"bg-white shadow-sm border-b border-base-200",children:re.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:re.jsxs("div",{className:"flex justify-between items-center h-16",children:[re.jsx("div",{className:"flex items-center",children:re.jsxs(r,{to:"/",className:"flex items-center space-x-2",children:[re.jsx("div",{className:"w-8 h-8 bg-base-500 rounded-lg flex items-center justify-center",children:re.jsx(N,{className:"w-5 h-5 text-white"})}),re.jsx("span",{className:"text-xl font-bold text-base-900",children:s("app.name")})]})}),re.jsxs("nav",{className:"hidden md:flex space-x-8",children:[re.jsxs(r,{to:"/",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors "+(n("/")?"bg-base-100 text-base-700":"text-gray-600 hover:text-base-700 hover:bg-base-50"),children:[re.jsx(v,{className:"w-4 h-4"}),re.jsx("span",{children:s("nav.dashboard")})]}),re.jsxs(r,{to:"/create-group",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors "+(n("/create-group")?"bg-base-100 text-base-700":"text-gray-600 hover:text-base-700 hover:bg-base-50"),children:[re.jsx(w,{className:"w-4 h-4"}),re.jsx("span",{children:s("nav.create_group")})]})]}),re.jsxs("div",{className:"flex items-center space-x-4",children:[re.jsx(Re,{}),re.jsx(We,{})]})]})})}),re.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e}),re.jsx(Ve,{}),re.jsx("footer",{className:"bg-gradient-to-r from-base-50 to-base-100 border-t border-base-200 mt-auto",children:re.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[re.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[re.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[re.jsx(m,{className:"w-4 h-4"}),re.jsx("span",{children:s("footer.powered_by")})]}),re.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[re.jsx("span",{children:s("footer.copyright")}),re.jsx("span",{children:"â€¢"}),re.jsx("span",{children:s("footer.shared_expenses")})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("span",{className:"text-sm text-gray-400",children:s("footer.created_by")}),re.jsxs("a",{href:"https://x.com/SeedsPuntoEth",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center space-x-2 px-3 py-1.5 bg-white/50 hover:bg-white/80 border border-gray-200/50 hover:border-blue-300/50 rounded-full transition-all duration-300 hover:shadow-sm backdrop-blur-sm",children:[re.jsx("div",{className:"w-5 h-5 bg-gray-600 group-hover:bg-blue-500 rounded-full flex items-center justify-center transition-all duration-300",children:re.jsx(_,{className:"w-3 h-3 text-white"})}),re.jsx("span",{className:"text-sm font-medium text-gray-600 group-hover:text-blue-600 transition-colors",children:"Noa"}),re.jsx("span",{className:"text-xs text-gray-400 group-hover:text-blue-500 transition-colors",children:"@SeedsPuntoEth"})]})]})]}),re.jsx("div",{className:"mt-4 pt-4 border-t border-base-200",children:re.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center text-xs text-gray-500 space-y-2 md:space-y-0",children:re.jsxs("div",{className:"flex items-center space-x-4",children:[re.jsxs("span",{children:["ðŸ”’ ",s("footer.secure_transactions")]}),re.jsx("span",{children:"â€¢"}),re.jsxs("span",{children:["ðŸ’Ž ",s("footer.usdc_stable")]})]})})})]})})]})},Ye=({group:e})=>{return re.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 hover:shadow-md transition-shadow",children:re.jsxs("div",{className:"p-6",children:[re.jsxs("div",{className:"flex items-start justify-between mb-4",children:[re.jsxs("div",{className:"flex-1",children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),re.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),re.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[re.jsxs("div",{className:"flex items-center space-x-1",children:[re.jsx(N,{className:"w-4 h-4"}),re.jsxs("span",{children:[e.participants.length," participantes"]})]}),re.jsxs("div",{className:"flex items-center space-x-1",children:[re.jsx(C,{className:"w-4 h-4"}),re.jsx("span",{children:(s=e.createdAt,new Date(s).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}))})]})]})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:"active"===e.status?"Activo":e.status}),re.jsx("button",{className:"p-1 hover:bg-base-100 rounded transition-colors",children:re.jsx(S,{className:"w-4 h-4 text-gray-400"})})]})]}),re.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[re.jsxs("div",{className:"bg-base-50 rounded-lg p-3",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[re.jsx(y,{className:"w-4 h-4 text-base-600"}),re.jsx("span",{className:"text-sm font-medium text-base-700",children:"Total Gastado"})]}),re.jsx("p",{className:"text-lg font-semibold text-base-900",children:(a=e.totalAmount,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(a))})]}),re.jsxs("div",{className:"bg-base-50 rounded-lg p-3",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[re.jsx(N,{className:"w-4 h-4 text-base-600"}),re.jsx("span",{className:"text-sm font-medium text-base-700",children:"Gastos"})]}),re.jsx("p",{className:"text-lg font-semibold text-base-900",children:e.expenses.length})]})]}),re.jsxs("div",{className:"mb-4",children:[re.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Participantes:"}),re.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.participants.slice(0,3).map((e,a)=>re.jsxs("span",{className:"px-2 py-1 bg-base-100 text-base-700 rounded-md text-xs font-mono",children:[e.slice(0,6),"...",e.slice(-4)]},a)),e.participants.length>3&&re.jsxs("span",{className:"px-2 py-1 bg-base-100 text-base-700 rounded-md text-xs",children:["+",e.participants.length-3," mÃ¡s"]})]})]}),re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsx(r,{to:`/group/${e.id}`,className:"flex items-center space-x-2 px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors text-sm font-medium",children:re.jsx("span",{children:"Ver Detalles"})}),re.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:re.jsxs("span",{children:["DivisiÃ³n: ",e.divisionMethod]})})]})]})});var a,s},Ke=()=>{const{isConnected:e,account:a}=Fe(),{groups:s,getGroupsByParticipant:t}=Me(),{t:n}=He(),o=a?t(a):s,i=o.length,c=o.reduce((e,a)=>e+a.expenses.length,0),l=o.reduce((e,a)=>e+a.totalAmount,0);return e?re.jsxs("div",{className:"space-y-8",children:[re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsxs("div",{children:[re.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n("dashboard.title")}),re.jsx("p",{className:"text-gray-600 mt-1",children:n("dashboard.manage_expenses")})]}),re.jsxs(r,{to:"/create-group",className:"flex items-center space-x-2 px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors",children:[re.jsx(w,{className:"w-4 h-4"}),re.jsx("span",{children:n("dashboard.create_group")})]})]}),re.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[re.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-12 h-12 bg-base-100 rounded-lg flex items-center justify-center",children:re.jsx(N,{className:"w-6 h-6 text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"text-sm font-medium text-gray-600",children:n("dashboard.active_groups")}),re.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]})]})}),re.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-12 h-12 bg-base-100 rounded-lg flex items-center justify-center",children:re.jsx(y,{className:"w-6 h-6 text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"text-sm font-medium text-gray-600",children:n("dashboard.total_spent")}),re.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(d=l,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(d))})]})]})}),re.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-12 h-12 bg-base-100 rounded-lg flex items-center justify-center",children:re.jsx(D,{className:"w-6 h-6 text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"text-sm font-medium text-gray-600",children:n("dashboard.registered_expenses")}),re.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c})]})]})})]}),re.jsxs("div",{children:[re.jsxs("div",{className:"flex items-center justify-between mb-6",children:[re.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n("dashboard.my_groups")}),re.jsxs("span",{className:"text-sm text-gray-500",children:[o.length," ",n("dashboard.groups_count")]})]}),0===o.length?re.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-base-200",children:[re.jsx("div",{className:"w-16 h-16 bg-base-100 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx(N,{className:"w-8 h-8 text-base-500"})}),re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n("ui.no_groups")}),re.jsx("p",{className:"text-gray-600 mb-6",children:n("dashboard.create_first_group")}),re.jsxs(r,{to:"/create-group",className:"inline-flex items-center space-x-2 px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors",children:[re.jsx(w,{className:"w-4 h-4"}),re.jsx("span",{children:n("ui.create_new_group")})]})]}):re.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>re.jsx(Ye,{group:e},e.id))})]}),re.jsxs("div",{className:"bg-base-50 rounded-lg p-6",children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones RÃ¡pidas"}),re.jsx("div",{className:"flex justify-center",children:re.jsxs(r,{to:"/create-group",className:"flex items-center space-x-3 p-4 bg-white rounded-lg hover:shadow-sm transition-shadow border border-base-200",children:[re.jsx("div",{className:"w-10 h-10 bg-base-100 rounded-lg flex items-center justify-center",children:re.jsx(w,{className:"w-5 h-5 text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"font-medium text-gray-900",children:n("ui.create_new_group")}),re.jsx("p",{className:"text-sm text-gray-600",children:n("ui.start_new_group")})]})]})})]})]}):re.jsx("div",{className:"text-center py-12",children:re.jsxs("div",{className:"max-w-md mx-auto",children:[re.jsx("div",{className:"w-16 h-16 bg-base-100 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx(N,{className:"w-8 h-8 text-base-500"})}),re.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n("dashboard.connect_wallet")}),re.jsx("p",{className:"text-gray-600 mb-6",children:n("dashboard.connect_description")}),re.jsx("div",{className:"bg-base-50 rounded-lg p-4",children:re.jsx("p",{className:"text-sm text-base-700",children:n("dashboard.tip")})})]})});var d},Qe=({onAddParticipant:a,onClose:s,existingParticipants:t})=>{const[r,n]=e.useState(""),[o,i]=e.useState(""),[c,l]=e.useState(!1);return re.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:re.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[re.jsxs("div",{className:"flex justify-between items-center mb-4",children:[re.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Agregar Participante"}),re.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:re.jsx(h,{size:20})})]}),re.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!r.trim()||!o.trim())return void d.error("Por favor completa todos los campos");if(!/^0x[a-fA-F0-9]{40}$/.test(r.trim()))return void d.error("Por favor ingresa una direcciÃ³n Ethereum vÃ¡lida (0x...)");const s=r.toLowerCase();if(t.some(e=>e.toLowerCase()===s))d.error("Este participante ya estÃ¡ en el grupo");else{l(!0);try{a(r.trim(),o.trim()),n(""),i(""),d.success(`Participante "${o}" agregado`)}catch{d.error("Error al agregar participante")}finally{l(!1)}}},className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{htmlFor:"participantName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del participante *"}),re.jsx("input",{type:"text",id:"participantName",value:o,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-base-500 focus:border-base-500",placeholder:"Ej: Juan PÃ©rez",maxLength:50,required:!0})]}),re.jsxs("div",{children:[re.jsx("label",{htmlFor:"participantAddress",className:"block text-sm font-medium text-gray-700 mb-2",children:"DirecciÃ³n de wallet *"}),re.jsx("input",{type:"text",id:"participantAddress",value:r,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-base-500 focus:border-base-500 font-mono text-sm",placeholder:"0x...",required:!0}),re.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"DirecciÃ³n Ethereum completa (0x + 40 caracteres)"})]}),re.jsxs("div",{className:"flex space-x-3",children:[re.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),re.jsx("button",{type:"submit",disabled:c||!r.trim()||!o.trim(),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-base-600 text-white rounded-lg hover:bg-base-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),re.jsx("span",{children:"Agregando..."})]}):re.jsxs(re.Fragment,{children:[re.jsx(w,{size:16}),re.jsx("span",{children:"Agregar"})]})})]})]})]})})},Xe=()=>{const a=n(),{isConnected:s,account:t,formatAddress:r}=Fe(),{createGroup:o,isLoading:i}=Me(),{t:c}=He(),[l,d]=e.useState({name:"",description:"",category:"general",divisionMethod:"equal",startDate:(new Date).toISOString().split("T")[0],endDate:""}),[m,x]=e.useState(()=>t?[{address:t,name:"TÃº"}]:[]),[u,p]=e.useState(!1),g=e=>{const{name:a,value:s}=e.target;d(e=>({...e,[a]:s}))};return s?re.jsxs("div",{className:"max-w-2xl mx-auto",children:[re.jsxs("div",{className:"mb-8",children:[re.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:c("ui.create_new_group")}),re.jsx("p",{className:"text-gray-600",children:c("create.description")})]}),re.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s)if(m.length<2)alert("Debes agregar al menos 2 participantes (incluyÃ©ndote a ti)");else try{const e={};m.forEach(a=>{e[a.address.toLowerCase()]=a.name});const s=await o({name:l.name,description:l.description,category:l.category,participants:m.map(e=>e.address)});s&&a("/")}catch(t){console.error("Error creating group:",t)}else alert("Por favor, conecta tu wallet primero")},className:"space-y-6",children:[re.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:[re.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:c("ui.group_info")}),re.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[re.jsxs("div",{children:[re.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:[c("ui.group_name")," *"]}),re.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",placeholder:c("placeholder.group_name"),required:!0})]}),re.jsxs("div",{children:[re.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:c("ui.category")}),re.jsxs("select",{id:"category",name:"category",value:l.category,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",children:[re.jsx("option",{value:"general",children:c("category.general")}),re.jsx("option",{value:"travel",children:c("category.travel")}),re.jsx("option",{value:"food",children:c("category.food")}),re.jsx("option",{value:"entertainment",children:c("category.entertainment")}),re.jsx("option",{value:"utilities",children:c("category.services")}),re.jsx("option",{value:"other",children:c("category.other")})]})]})]}),re.jsxs("div",{className:"mt-4",children:[re.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:c("ui.description")}),re.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",placeholder:c("placeholder.description")})]})]}),re.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:[re.jsxs("div",{className:"flex justify-between items-center mb-4",children:[re.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c("ui.participants")}),re.jsxs("button",{type:"button",onClick:()=>p(!0),className:"flex items-center space-x-2 px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors",children:[re.jsx(w,{size:16}),re.jsx("span",{children:c("ui.add_participant")})]})]}),0===m.length?re.jsxs("div",{className:"text-center py-8 text-gray-500",children:[re.jsx(N,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),re.jsx("p",{children:c("ui.no_participants")}),re.jsx("p",{className:"text-sm",children:c("ui.add_min_participants")})]}):re.jsx("div",{className:"space-y-3",children:m.map(e=>re.jsxs("div",{className:"flex items-center justify-between p-3 bg-base-50 rounded-lg",children:[re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-8 h-8 bg-base-100 rounded-full flex items-center justify-center",children:re.jsx(E,{size:16,className:"text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"font-medium text-gray-900",children:e.name}),re.jsx("p",{className:"text-sm text-gray-500 font-mono",children:r(e.address)})]})]}),e.address!==t&&re.jsx("button",{type:"button",onClick:()=>{return a=e.address,void x(e=>e.filter(e=>e.address!==a));var a},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:c("ui.remove_participant"),children:re.jsx(h,{size:16})})]},e.address))}),re.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[re.jsx("p",{children:"â€¢ TÃº estÃ¡s incluido automÃ¡ticamente como participante"}),re.jsx("p",{children:"â€¢ Agrega las direcciones de wallet de tus amigos"}),re.jsx("p",{children:"â€¢ MÃ­nimo 2 participantes para crear el grupo"})]})]}),re.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:[re.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ConfiguraciÃ³n"}),re.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[re.jsxs("div",{children:[re.jsx("label",{htmlFor:"divisionMethod",className:"block text-sm font-medium text-gray-700 mb-1",children:"MÃ©todo de divisiÃ³n"}),re.jsxs("select",{id:"divisionMethod",name:"divisionMethod",value:l.divisionMethod,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",children:[re.jsx("option",{value:"equal",children:"DivisiÃ³n igual"}),re.jsx("option",{value:"proportional",children:"Proporcional"})]})]}),re.jsxs("div",{children:[re.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de inicio"}),re.jsx("input",{type:"date",id:"startDate",name:"startDate",value:l.startDate,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",required:!0})]})]}),re.jsxs("div",{className:"mt-4",children:[re.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de fin (opcional)"}),re.jsx("input",{type:"date",id:"endDate",name:"endDate",value:l.endDate,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500"})]})]}),re.jsxs("div",{className:"flex justify-end space-x-4",children:[re.jsx("button",{type:"button",onClick:()=>a("/"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:c("common.cancel")}),re.jsx("button",{type:"submit",disabled:i||m.length<2||!l.name.trim(),className:"px-6 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c(i?"common.creating":"nav.create_group")})]})]}),u&&re.jsx(Qe,{onAddParticipant:(e,a)=>{x(s=>[...s,{address:e,name:a}]),p(!1)},onClose:()=>p(!1),existingParticipants:m.map(e=>e.address)})]}):re.jsx("div",{className:"text-center py-12",children:re.jsxs("div",{className:"max-w-md mx-auto",children:[re.jsx("div",{className:"w-16 h-16 bg-base-100 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx(N,{className:"w-8 h-8 text-base-500"})}),re.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:c("create.connect_wallet")}),re.jsx("p",{className:"text-gray-600",children:c("create.connect_description")})]})})},Ze=({groupId:a,address:s,currentName:t="",onClose:r})=>{const{addParticipantName:n}=Me(),[o,i]=e.useState(t),[c,l]=e.useState(!1);return re.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:re.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[re.jsxs("div",{className:"flex justify-between items-center mb-4",children:[re.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t?"Editar Nombre":"Agregar Nombre"}),re.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:re.jsx(h,{size:20})})]}),re.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!o.trim())return void d.error("Por favor ingresa un nombre");l(!0);const t=await n(a,s,o.trim());l(!1),t&&r()},className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DirecciÃ³n del participante:"}),re.jsx("div",{className:"bg-gray-100 p-3 rounded-lg text-sm font-mono text-gray-600",children:s})]}),re.jsxs("div",{children:[re.jsx("label",{htmlFor:"participantName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del participante:"}),re.jsx("input",{type:"text",id:"participantName",value:o,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-base-500 focus:border-base-500",placeholder:"Ej: Juan PÃ©rez",maxLength:50,required:!0})]}),re.jsxs("div",{className:"flex space-x-3",children:[re.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),re.jsx("button",{type:"submit",disabled:c||!o.trim(),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-base-600 text-white rounded-lg hover:bg-base-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),re.jsx("span",{children:"Guardando..."})]}):re.jsxs(re.Fragment,{children:[re.jsx(w,{size:16}),re.jsx("span",{children:t?"Actualizar":"Agregar"})]})})]})]})]})})},ea="0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",aa=async(e,a,s,t,r)=>{try{if(!/^0x[a-fA-F0-9]{64}$/.test(e))return{isValid:!1,error:"Formato de hash de transacciÃ³n invÃ¡lido"};const n=await r.getTransaction(e);if(!n)return{isValid:!1,error:"TransacciÃ³n no encontrada en la blockchain"};const o=await r.getTransactionReceipt(e);if(!o)return{isValid:!1,error:"Recibo de transacciÃ³n no encontrado"};if(1!==o.status)return{isValid:!1,error:"La transacciÃ³n fallÃ³ en la blockchain"};const i=await r.getNetwork();if(8453!==Number(i.chainId))return{isValid:!1,error:`TransacciÃ³n no estÃ¡ en Base Network (Chain ID: ${Number(i.chainId)})`};if(n.from.toLowerCase()!==a.toLowerCase())return{isValid:!1,error:`El remitente no coincide. Esperado: ${a}, Encontrado: ${n.from}`};const c=n.to?.toLowerCase()===ea.toLowerCase(),l=B(t.toString(),6);if(c){const e=q("Transfer(address,address,uint256)"),r=o.logs.find(a=>a.topics[0]===e&&a.address.toLowerCase()===ea.toLowerCase());if(!r)return{isValid:!1,error:"No se encontrÃ³ evento de transferencia USDC"};const n=H("0x"+r.topics[1].slice(26)),i=H("0x"+r.topics[2].slice(26)),c=W(r.data);if(n.toLowerCase()!==a.toLowerCase())return{isValid:!1,error:`El remitente del evento USDC no coincide. Esperado: ${a}, Encontrado: ${n}`};if(i.toLowerCase()!==s.toLowerCase())return{isValid:!1,error:`El destinatario del evento USDC no coincide. Esperado: ${s}, Encontrado: ${i}`};if(c!==l)return{isValid:!1,error:`Monto USDC no coincide. Esperado: ${t} USDC, Encontrado: ${V(c,6)} USDC`};console.log("âœ… ValidaciÃ³n USDC exitosa:",{from:n,to:i,amount:V(c,6)+" USDC"})}else{if(n.to?.toLowerCase()!==s.toLowerCase())return{isValid:!1,error:`El destinatario ETH no coincide. Esperado: ${s}, Encontrado: ${n.to}`};const e=R(t.toString());if(n.value!==e){return{isValid:!1,error:`Monto ETH no coincide. Esperado: ${t} ETH, Encontrado: ${J(n.value)} ETH`}}console.log("âœ… ValidaciÃ³n ETH exitosa:",{from:n.from,to:n.to,amount:J(n.value)+" ETH"})}return{isValid:!0,transactionData:{from:n.from,to:c?s:n.to||"",value:c?V(l,6)+" USDC":J(n.value)+" ETH",status:o.status,blockNumber:o.blockNumber,gasUsed:o.gasUsed.toString()}}}catch(n){return console.error("Error validating transaction:",n),n instanceof Error?{isValid:!1,error:`Error de validaciÃ³n: ${n.message}`}:{isValid:!1,error:"Error desconocido durante la validaciÃ³n"}}},sa=({paymentId:a,from:s,to:t,amount:r,onComplete:n,onClose:o})=>{console.log("ðŸ” CompletePayment: Iniciando componente");const{provider:i}=Fe();console.log("ðŸ” CompletePayment: useWeb3 hook ejecutado, provider:",i);const[c,l]=e.useState(""),[m,x]=e.useState(!1),[p,g]=e.useState(null),y=e.useCallback(e=>{if(!e.trim())return!1;const a=e.trim();return/^0x[a-fA-F0-9]{64}$/.test(a)},[]),j=e.useCallback(e=>{const a=e.target.value;l(a),y(a)&&g(null)},[y]),N=e=>`${e.slice(0,6)}...${e.slice(-4)}`;return console.log("ðŸ” CompletePayment: Renderizando modal"),re.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:re.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[re.jsxs("div",{className:"flex justify-between items-center mb-4",children:[re.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Completar Pago"}),re.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:re.jsx(h,{size:20})})]}),re.jsxs("div",{className:"mb-6 p-4 bg-base-50 rounded-lg",children:[re.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Detalles del Pago"}),re.jsxs("div",{className:"space-y-2 text-sm",children:[re.jsxs("div",{className:"flex justify-between",children:[re.jsx("span",{className:"text-gray-600",children:"De:"}),re.jsx("span",{className:"font-mono text-gray-900",children:N(s)})]}),re.jsxs("div",{className:"flex justify-between",children:[re.jsx("span",{className:"text-gray-600",children:"Para:"}),re.jsx("span",{className:"font-mono text-gray-900",children:N(t)})]}),re.jsxs("div",{className:"flex justify-between",children:[re.jsx("span",{className:"text-gray-600",children:"Monto:"}),re.jsxs("span",{className:"font-bold text-base-700",children:[(v=r,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(v))," USDC"]})]})]})]}),re.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g(null),!c.trim()){const e="Por favor ingresa el hash de la transacciÃ³n";return g(e),void d.error(e)}if(!y(c)){const e="Formato de hash invÃ¡lido. Debe ser 0x seguido de 64 caracteres hexadecimales";return g(e),void d.error(e)}x(!0);try{if(!i){const e="No hay conexiÃ³n a Web3";return g(e),void d.error(e)}console.log("ðŸ” Validando transacciÃ³n:",{hash:c.trim(),from:s,to:t,amount:r});const e=await aa(c.trim(),s,t,r,i);if(!e.isValid){const a=e.error||"TransacciÃ³n invÃ¡lida";return g(a),d.error(a),void console.error("âŒ ValidaciÃ³n fallida:",e.error)}console.log("âœ… TransacciÃ³n validada correctamente:",e.transactionData),d.success("TransacciÃ³n validada correctamente"),await n(a,c.trim()),o()}catch(l){const e=l instanceof Error?l.message:"Error al validar la transacciÃ³n";g(e),console.error("Error validating transaction:",l),d.error(e)}finally{x(!1)}},className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{htmlFor:"transactionHash",className:"block text-sm font-medium text-gray-700 mb-2",children:"Hash de TransacciÃ³n *"}),re.jsxs("div",{className:"relative",children:[re.jsx("input",{type:"text",id:"transactionHash",value:c,onChange:j,className:"w-full px-4 py-2 pr-10 border rounded-lg focus:ring-base-500 focus:border-base-500 font-mono text-sm "+(p?"border-red-500":"border-gray-300"),placeholder:"0x...",required:!0}),c.trim()&&re.jsx("button",{type:"button",onClick:()=>{var e;(e=c).trim()&&(navigator.clipboard.writeText(e),d.success("Copiado al portapapeles"))},className:"absolute right-2 top-2 p-1 text-gray-400 hover:text-gray-600",title:"Copiar",children:re.jsx(u,{size:16})})]}),p&&re.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-red-600 text-sm",children:[re.jsx(b,{size:16}),re.jsx("span",{children:p})]}),re.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hash de la transacciÃ³n en Base Network (0x + 64 caracteres)"})]}),re.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:re.jsxs("div",{className:"flex items-start space-x-2",children:[re.jsx(f,{className:"w-5 h-5 text-blue-600 mt-0.5"}),re.jsxs("div",{className:"text-sm text-blue-800",children:[re.jsx("p",{className:"font-medium",children:"VerificaciÃ³n de Pago"}),re.jsx("p",{className:"mt-1",children:"Una vez completado, el saldo se actualizarÃ¡ automÃ¡ticamente y se notificarÃ¡ a todos los participantes."})]})]})}),re.jsxs("div",{className:"flex space-x-3",children:[re.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),re.jsx("button",{type:"submit",disabled:m||!c.trim()||!!p,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),re.jsx("span",{children:"Completando..."})]}):re.jsxs(re.Fragment,{children:[re.jsx(f,{size:16}),re.jsx("span",{children:"Completar Pago"})]})})]})]}),c.trim()&&re.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:re.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["ðŸ’¡ Puedes verificar la transacciÃ³n en"," ",re.jsx("a",{href:`https://basescan.org/tx/${c.trim()}`,target:"_blank",rel:"noopener noreferrer",className:"text-base-600 hover:text-base-700 underline",children:"BaseScan"})]})})]})});var v},ta=({groupId:a,from:s,to:t,amount:r,onClose:n})=>{const{formatAddress:o}=Fe(),{getParticipantName:i}=Me(),[c,l]=e.useState(""),[m,x]=e.useState(!1),u=i(a,s),p=i(a,t),b=u||o(s),f=p||o(t);return re.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:re.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[re.jsxs("div",{className:"flex justify-between items-center mb-4",children:[re.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Solicitar Pago"}),re.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:re.jsx(h,{size:20})})]}),re.jsxs("div",{className:"mb-6 p-4 bg-base-50 rounded-lg",children:[re.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Detalles del Pago"}),re.jsxs("div",{className:"space-y-2 text-sm",children:[re.jsxs("div",{className:"flex justify-between",children:[re.jsx("span",{className:"text-gray-600",children:"De:"}),re.jsx("span",{className:"font-medium text-gray-900",children:b})]}),re.jsxs("div",{className:"flex justify-between",children:[re.jsx("span",{className:"text-gray-600",children:"Para:"}),re.jsx("span",{className:"font-medium text-gray-900",children:f})]}),re.jsxs("div",{className:"flex justify-between",children:[re.jsx("span",{className:"text-gray-600",children:"Monto:"}),re.jsxs("span",{className:"font-bold text-base-700",children:[(y=r,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(y))," USDC"]})]})]})]}),re.jsxs("div",{className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje personalizado *"}),re.jsx("textarea",{id:"message",value:c,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-base-500 focus:border-base-500",rows:3,placeholder:"Ej: Hola, necesito que me pagues tu parte del gasto de la cena...",required:!0})]}),re.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:re.jsxs("div",{className:"flex items-start space-x-2",children:[re.jsx(g,{className:"w-5 h-5 text-blue-600 mt-0.5"}),re.jsxs("div",{className:"text-sm text-blue-800",children:[re.jsx("p",{className:"font-medium",children:"NotificaciÃ³n AutomÃ¡tica"}),re.jsxs("p",{className:"mt-1",children:["Se enviarÃ¡ una notificaciÃ³n a ",f," para recordarle el pago pendiente."]})]})]})}),re.jsxs("div",{className:"flex space-x-3",children:[re.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),re.jsx("button",{onClick:async()=>{if(c.trim()){x(!0);try{const e={id:`payment_request_${Date.now()}`,type:"payment_request",groupId:a,groupName:"Grupo",message:`Solicitud de pago: ${c}`,amount:r,from:s,to:t,timestamp:(new Date).toISOString(),read:!1},o=JSON.parse(localStorage.getItem(`notifications_${t}`)||"[]");o.push(e),localStorage.setItem(`notifications_${t}`,JSON.stringify(o)),d.success("Solicitud de pago enviada"),n()}catch(e){d.error("Error al enviar la solicitud")}finally{x(!1)}}else d.error("Por favor escribe un mensaje")},disabled:m||!c.trim(),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),re.jsx("span",{children:"Enviando..."})]}):re.jsxs(re.Fragment,{children:[re.jsx(P,{size:16}),re.jsx("span",{children:"Enviar Solicitud"})]})})]})]})]})});var y},ra=({groupId:a,from:s,to:t,amount:r,onClose:n})=>{const{formatAddress:o}=Fe(),{getParticipantName:i}=Me(),[c,l]=e.useState(!1),[m,x]=e.useState(""),u=i(a,s),p=i(a,t),g=u||o(s),b=p||o(t);return re.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:re.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[re.jsxs("div",{className:"flex justify-between items-center mb-4",children:[re.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Cancelar Deuda"}),re.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:re.jsx(h,{size:20})})]}),re.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[re.jsx(k,{className:"w-5 h-5 text-red-600"}),re.jsx("h3",{className:"font-semibold text-red-800",children:"Advertencia"})]}),re.jsxs("p",{className:"text-sm text-red-700",children:["Esta acciÃ³n cancelarÃ¡ permanentemente la deuda de ",re.jsxs("strong",{children:[(f=r,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(f))," USDC"]}),"entre ",re.jsx("strong",{children:g})," y ",re.jsx("strong",{children:b}),"."]})]}),re.jsxs("div",{className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo de la cancelaciÃ³n *"}),re.jsx("textarea",{id:"reason",value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500",rows:3,placeholder:"Ej: Error en el cÃ¡lculo, gasto duplicado, acuerdo mutuo...",required:!0})]}),re.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:re.jsxs("div",{className:"flex items-start space-x-2",children:[re.jsx(k,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),re.jsxs("div",{className:"text-sm text-yellow-800",children:[re.jsx("p",{className:"font-medium",children:"Importante"}),re.jsx("p",{className:"mt-1",children:"Esta acciÃ³n no se puede deshacer. La deuda serÃ¡ marcada como cancelada y se registrarÃ¡ en el historial del grupo."})]})]})}),re.jsxs("div",{className:"flex space-x-3",children:[re.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),re.jsx("button",{onClick:async()=>{if(m.trim()){l(!0);try{d.success("Funcionalidad de cancelar deuda en desarrollo"),n()}catch(e){console.error("Error cancelling debt:",e),d.error("Error al cancelar la deuda")}finally{l(!1)}}else d.error("Por favor explica el motivo de la cancelaciÃ³n")},disabled:c||!m.trim(),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),re.jsx("span",{children:"Cancelando..."})]}):re.jsxs(re.Fragment,{children:[re.jsx($,{size:16}),re.jsx("span",{children:"Cancelar Deuda"})]})})]})]})]})});var f},na=({groupId:a,onPaymentCompleted:s})=>{const{account:t,formatAddress:r}=Fe(),{getPendingPayments:n,completePayment:o,getParticipantName:i}=Me(),[c,l]=e.useState(!1),[d,m]=e.useState(!1),[x,u]=e.useState(!1),[p,h]=e.useState(null),j=t?n(a,t):[];return 0===j.length?null:re.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-6",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[re.jsx(b,{className:"w-5 h-5 text-yellow-600"}),re.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Pagos Pendientes"})]}),re.jsx("div",{className:"space-y-3",children:j.map(e=>{const s=i(a,e.to)||r(e.to);return re.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsxs("div",{className:"flex-1",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[re.jsx(I,{className:"w-4 h-4 text-yellow-600"}),re.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pago Pendiente"})]}),re.jsxs("div",{className:"space-y-1",children:[re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx(E,{className:"w-4 h-4 text-gray-500"}),re.jsxs("span",{className:"text-sm text-gray-600",children:["Debe a: ",re.jsx("span",{className:"font-medium",children:s})]})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx(y,{className:"w-4 h-4 text-gray-500"}),re.jsxs("span",{className:"text-sm text-gray-600",children:["Monto: ",re.jsxs("span",{className:"font-bold text-yellow-700",children:[(t=e.amount,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t))," USDC"]})]})]})]})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsxs("button",{onClick:()=>(e=>{h(e),m(!0)})(e),className:"flex items-center space-x-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[re.jsx(g,{size:14}),re.jsx("span",{children:"Avisar"})]}),re.jsxs("button",{onClick:()=>(e=>{h(e),l(!0)})(e),className:"flex items-center space-x-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[re.jsx(f,{size:14}),re.jsx("span",{children:"Pagar"})]}),re.jsxs("button",{onClick:()=>(e=>{h(e),u(!0)})(e),className:"flex items-center space-x-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[re.jsx($,{size:14}),re.jsx("span",{children:"Cancelar"})]})]})]}),re.jsx("div",{className:"mt-3 pt-3 border-t border-yellow-200",children:re.jsx("p",{className:"text-xs text-yellow-700",children:'ðŸ’¡ Usa "Avisar" para recordar, "Pagar" para completar, o "Cancelar" para anular la deuda'})})]},e.id);var t})}),c&&p&&re.jsx(sa,{paymentId:p.id,from:p.from,to:p.to,amount:p.amount,onComplete:async(e,r)=>{if(t){await o(a,e,r,t)&&(l(!1),h(null),s&&s())}},onClose:()=>{l(!1),h(null)}}),d&&p&&re.jsx(ta,{groupId:a,from:p.from,to:p.to,amount:p.amount,onClose:()=>{m(!1),h(null)}}),x&&p&&re.jsx(ra,{groupId:a,from:p.from,to:p.to,amount:p.amount,onClose:()=>{u(!1),h(null)}})]})},oa=({groupId:e})=>{const{getPaymentHistory:a,getParticipantName:s}=Me(),t=a(e),r=e=>new Date(e).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),n=e=>{switch(e){case"completed":return re.jsx(f,{className:"w-4 h-4 text-green-600"});case"pending":return re.jsx(I,{className:"w-4 h-4 text-yellow-600"});case"disputed":return re.jsx($,{className:"w-4 h-4 text-red-600"});default:return re.jsx(I,{className:"w-4 h-4 text-gray-600"})}},o=e=>{switch(e){case"completed":return"bg-green-50 border-green-200";case"pending":return"bg-yellow-50 border-yellow-200";case"disputed":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},i=e=>{switch(e){case"completed":return"Completado";case"pending":return"Pendiente";case"disputed":return"Disputado";default:return"Desconocido"}};return 0===t.length?re.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Historial de Pagos"}),re.jsxs("div",{className:"text-center py-8 text-gray-500",children:[re.jsx(y,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),re.jsx("p",{children:"No hay pagos registrados"}),re.jsx("p",{className:"text-sm",children:"Los pagos aparecerÃ¡n aquÃ­ cuando se agreguen gastos"})]})]}):re.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Historial de Pagos"}),re.jsx("div",{className:"space-y-3",children:t.map(a=>{const t=s(e,a.from),c=s(e,a.to),l=t||a.from.slice(0,6)+"..."+a.from.slice(-4),d=c||a.to.slice(0,6)+"..."+a.to.slice(-4);return re.jsxs("div",{className:`p-4 rounded-lg border ${o(a.status)}`,children:[re.jsxs("div",{className:"flex items-center justify-between mb-2",children:[re.jsxs("div",{className:"flex items-center space-x-2",children:[n(a.status),re.jsx("span",{className:"text-sm font-medium text-gray-900",children:i(a.status)})]}),re.jsx("span",{className:"text-sm text-gray-500",children:r(a.createdAt)})]}),re.jsxs("div",{className:"space-y-1",children:[re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsx("span",{className:"text-sm text-gray-600",children:"De:"}),re.jsx("span",{className:"text-sm font-medium text-gray-900",children:l})]}),re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsx("span",{className:"text-sm text-gray-600",children:"Para:"}),re.jsx("span",{className:"text-sm font-medium text-gray-900",children:d})]}),re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsx("span",{className:"text-sm text-gray-600",children:"Monto:"}),re.jsx("span",{className:"text-sm font-bold text-gray-900",children:(m=a.amount,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(m))})]}),"completed"===a.status&&a.transactionHash&&re.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[re.jsxs("div",{className:"flex items-center justify-between",children:[re.jsx("span",{className:"text-xs text-gray-500",children:"TransacciÃ³n:"}),re.jsxs("a",{href:`https://basescan.org/tx/${a.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-xs text-base-600 hover:text-base-700",children:[re.jsxs("span",{className:"font-mono",children:[a.transactionHash.slice(0,10),"..."]}),re.jsx(A,{size:12})]})]}),a.completedAt&&re.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Completado: ",r(a.completedAt)]})]})]})]},a.id);var m})})]})},ia=({children:e,className:a="",padding:s="md",shadow:t="sm",border:r=!0,hover:n=!1,onClick:o})=>{const i=`rounded-lg bg-white ${{none:"",sm:"p-3",md:"p-6",lg:"p-8"}[s]} ${{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[t]} ${r?"border border-gray-200":""} ${n?"hover:shadow-md transition-shadow cursor-pointer":""} ${a}`;return re.jsx("div",{className:i,onClick:o,children:e})},ca=({children:e,variant:a="primary",size:s="md",loading:t=!1,leftIcon:r,rightIcon:n,fullWidth:o=!1,disabled:i,className:c="",...l})=>{const d=`inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-base-500 text-white hover:bg-base-600 focus:ring-base-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[a]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s]} ${o?"w-full":""} ${c}`,m=i||t;return re.jsxs("button",{className:d,disabled:m,...l,children:[t&&re.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}),!t&&r&&re.jsx("span",{className:"mr-2",children:r}),e,!t&&n&&re.jsx("span",{className:"ml-2",children:n})]})},la=e.forwardRef(({label:e,error:a,success:s,leftIcon:t,rightIcon:r,containerClassName:n="",className:o="",...i},c)=>{const l=`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${a?"border-red-500":""} ${s?"border-green-500":""} ${a||s?"":"border-gray-300"} ${i.disabled?"bg-gray-100 cursor-not-allowed":""} ${o}`;return re.jsxs("div",{className:`space-y-1 ${n}`,children:[e&&re.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e,i.required&&re.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),re.jsxs("div",{className:"relative",children:[t&&re.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:re.jsx("div",{className:"text-gray-400",children:t})}),re.jsx("input",{ref:c,className:`${l} ${t?"pl-10":""} ${r||a||s?"pr-10":""}`,...i}),(r||a||s)&&re.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:[a&&re.jsx(b,{className:"w-4 h-4 text-red-500"}),s&&re.jsx(f,{className:"w-4 h-4 text-green-500"}),!a&&!s&&r&&re.jsx("div",{className:"text-gray-400",children:r})]})]}),a&&re.jsxs("div",{className:"flex items-center space-x-1 text-red-600 text-sm",children:[re.jsx(b,{className:"w-4 h-4"}),re.jsx("span",{children:a})]})]})});la.displayName="OptimizedInput";const da=({groupId:a,debtAmount:s,fromAddress:t,toAddress:r,onPaymentCompleted:n})=>{const{account:o}=Fe(),{getParticipantName:i}=Me(),{t:c,translateNotification:l}=He(),[m,x]=e.useState(!1),[u,p]=e.useState(""),[g,y]=e.useState(!1),[j,N]=e.useState(null);if(!o||o.toLowerCase()!==t.toLowerCase())return null;const v=i(a,t),w=i(a,r);return re.jsxs(re.Fragment,{children:[re.jsxs(ca,{variant:"primary",size:"sm",leftIcon:re.jsx(L,{className:"w-4 h-4"}),onClick:()=>x(!0),className:"w-full",children:["Pagar ",s.toFixed(2)," USDC"]}),m&&re.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:re.jsxs(ia,{className:"w-full max-w-md",padding:"lg",children:[re.jsxs("div",{className:"flex items-center justify-between mb-6",children:[re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:re.jsx(L,{className:"w-5 h-5 text-green-600"})}),re.jsxs("div",{children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Completar Pago"}),re.jsx("p",{className:"text-sm text-gray-600",children:"Ingresa el hash de la transacciÃ³n"})]})]}),re.jsx("button",{onClick:()=>{x(!1),p(""),N(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:re.jsx(h,{className:"w-5 h-5 text-gray-400"})})]}),re.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:re.jsxs("div",{className:"space-y-2",children:[re.jsxs("div",{className:"flex justify-between text-sm",children:[re.jsx("span",{className:"text-gray-600",children:"De:"}),re.jsx("span",{className:"font-medium",children:v})]}),re.jsxs("div",{className:"flex justify-between text-sm",children:[re.jsx("span",{className:"text-gray-600",children:"Para:"}),re.jsx("span",{className:"font-medium",children:w})]}),re.jsxs("div",{className:"flex justify-between text-sm",children:[re.jsx("span",{className:"text-gray-600",children:"Monto:"}),re.jsxs("span",{className:"font-semibold text-green-600",children:[s.toFixed(2)," USDC"]})]})]})}),re.jsxs("div",{className:"space-y-4",children:[re.jsx(la,{label:"Hash de TransacciÃ³n",placeholder:"0x...",value:u,onChange:e=>{p(e.target.value),N(null)},error:j||void 0,leftIcon:re.jsx(b,{className:"w-4 h-4"}),required:!0}),re.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:re.jsxs("div",{className:"flex items-start space-x-2",children:[re.jsx(f,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),re.jsxs("div",{className:"text-sm text-blue-800",children:[re.jsx("p",{className:"font-medium",children:"Instrucciones:"}),re.jsxs("ol",{className:"mt-1 space-y-1 text-xs",children:[re.jsx("li",{children:"1. Realiza la transacciÃ³n en tu wallet"}),re.jsx("li",{children:"2. Copia el hash de la transacciÃ³n"}),re.jsx("li",{children:"3. PÃ©galo en el campo de arriba"}),re.jsx("li",{children:'4. Haz clic en "Completar Pago"'})]})]})]})}),re.jsxs("div",{className:"flex space-x-3 pt-4",children:[re.jsx(ca,{variant:"secondary",size:"md",fullWidth:!0,onClick:()=>{x(!1),p(""),N(null)},disabled:g,children:"Cancelar"}),re.jsx(ca,{variant:"primary",size:"md",fullWidth:!0,loading:g,onClick:async()=>{if(u.trim())if(/^0x[a-fA-F0-9]{64}$/.test(u.trim())){y(!0),N(null);try{const{provider:e}=Fe();if(!e)return void N("No hay conexiÃ³n a Web3");const i=await aa(u.trim(),t,r,s,e);if(!i.isValid)return N(i.error||"TransacciÃ³n invÃ¡lida"),void console.error("âŒ ValidaciÃ³n fallida:",i.error);console.log("âœ… TransacciÃ³n validada correctamente:",i.transactionData),d.success(c("payment.validate_success"));const m=`payment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g=JSON.parse(localStorage.getItem("splitpay-groups")||"[]").map(e=>{if(e.id===a){const a={id:m,from:t,to:r,amount:s,status:"completed",transactionHash:u.trim(),createdAt:(new Date).toISOString(),completedAt:(new Date).toISOString(),completedBy:o,notes:"Pago completado mediante hash de transacciÃ³n"},n={id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"payment_completed",groupId:e.id,groupName:e.name,message:l("notifications.payment_received",{amount:s.toFixed(2),from:e.participantNames?.[t.toLowerCase()]||`${t.slice(0,6)}...${t.slice(-4)}`,group:e.name}),amount:s,from:t,to:r,timestamp:(new Date).toISOString(),read:!1},i=`notifications_${r.toLowerCase()}`,c=JSON.parse(localStorage.getItem(i)||"[]");return localStorage.setItem(i,JSON.stringify([...c,n])),{...e,payments:[...e.payments,a]}}return e});localStorage.setItem("splitpay-groups",JSON.stringify(g)),d.success(`Â¡Pago de ${s.toFixed(2)} USDC completado!`),x(!1),p(""),N(null),n&&n()}catch(e){console.error("Error procesando pago:",e),N(e instanceof Error?e.message:"Error al procesar el pago"),d.error("Error al procesar el pago")}finally{y(!1)}}else N(c("payment.transaction_hash_invalid_format"));else N(c("payment.transaction_hash_required"))},disabled:!u.trim()||g,children:g?"Procesando...":"Completar Pago"})]})]})]})})]})},ma=({groupId:a,onPaymentCompleted:s})=>{const{account:t}=Fe(),{groups:r}=Me(),[n,o]=e.useState(null),[i,c]=e.useState([]),[l,d]=e.useState(0),[m,x]=e.useState(0),u=e.useCallback(async()=>{if(t&&a)try{const e=JSON.parse(localStorage.getItem("splitpay-groups")||"[]").find(e=>e.id===a);if(!e)return;o(e);const{debts:s,userOwes:r,userIsOwed:n}=Ge(e,t);c(s),d(r),x(n)}catch(e){console.error("Error loading group or calculating debts:",e)}},[t,a]);return e.useEffect(()=>{u()},[u]),e.useEffect(()=>{const e=r.find(e=>e.id===a);if(e&&t){o(e);const{debts:a,userOwes:s,userIsOwed:r}=Ge(e,t);c(a),d(s),x(r)}},[r,a,t]),e.useEffect(()=>{const e=()=>{u()};window.addEventListener("storage",e);const a=setInterval(e,1e3);return()=>{window.removeEventListener("storage",e),clearInterval(a)}},[u]),t?n?re.jsxs("div",{className:"space-y-6",children:[re.jsxs(ia,{children:[re.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[re.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:re.jsx(L,{className:"w-5 h-5 text-blue-600"})}),re.jsxs("div",{children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Mis Deudas"}),re.jsx("p",{className:"text-sm text-gray-600",children:"Resumen de pagos pendientes"})]})]}),re.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[re.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[re.jsx(b,{className:"w-4 h-4 text-red-600"}),re.jsx("span",{className:"text-sm font-medium text-red-800",children:"Debes"})]}),re.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[l.toFixed(2)," USDC"]})]}),re.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[re.jsx(L,{className:"w-4 h-4 text-green-600"}),re.jsx("span",{className:"text-sm font-medium text-green-800",children:"Te deben"})]}),re.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[m.toFixed(2)," USDC"]})]})]})]}),i.length>0?re.jsxs(ia,{children:[re.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[re.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:re.jsx(N,{className:"w-5 h-5 text-orange-600"})}),re.jsxs("div",{children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Deudas Pendientes"}),re.jsx("p",{className:"text-sm text-gray-600",children:"Pagos especÃ­ficos por realizar"})]})]}),re.jsx("div",{className:"space-y-4",children:i.map((e,t)=>re.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[re.jsxs("div",{className:"flex items-center justify-between mb-3",children:[re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:re.jsx(b,{className:"w-4 h-4 text-red-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"font-medium text-gray-900",children:n.participantNames?.[e.from.toLowerCase()]||`${e.from.slice(0,6)}...${e.from.slice(-4)}`}),re.jsxs("p",{className:"text-sm text-gray-600",children:["debe a ",n.participantNames?.[e.to.toLowerCase()]||`${e.to.slice(0,6)}...${e.to.slice(-4)}`]})]})]}),re.jsx("div",{className:"text-right",children:re.jsxs("p",{className:"text-lg font-semibold text-red-600",children:[e.amount.toFixed(2)," USDC"]})})]}),re.jsx(da,{groupId:a,debtAmount:e.amount,fromAddress:e.from,toAddress:e.to,onPaymentCompleted:()=>{u(),s&&s()}})]},t))})]}):re.jsxs(ia,{className:"text-center py-8",children:[re.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx(L,{className:"w-8 h-8 text-green-600"})}),re.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Â¡Todo al dÃ­a!"}),re.jsx("p",{className:"text-gray-600",children:m>0?`Te deben ${m.toFixed(2)} USDC`:"No tienes deudas pendientes en este grupo"})]}),re.jsx(ia,{className:"bg-blue-50 border-blue-200",children:re.jsxs("div",{className:"flex items-start space-x-3",children:[re.jsx(b,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),re.jsxs("div",{className:"text-sm text-blue-800",children:[re.jsx("p",{className:"font-medium mb-1",children:"Â¿CÃ³mo funciona el pago?"}),re.jsxs("ol",{className:"space-y-1 text-xs",children:[re.jsx("li",{children:'1. Haz clic en "Pagar" para la deuda que quieres saldar'}),re.jsx("li",{children:"2. Realiza la transacciÃ³n en tu wallet"}),re.jsx("li",{children:"3. Copia el hash de la transacciÃ³n"}),re.jsx("li",{children:"4. PÃ©galo en el formulario y confirma"}),re.jsx("li",{children:"5. Â¡La deuda se marcarÃ¡ como pagada automÃ¡ticamente!"})]})]})]})})]}):re.jsxs(ia,{className:"text-center py-8",children:[re.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),re.jsx("p",{className:"text-gray-600",children:"Cargando informaciÃ³n del grupo..."})]}):re.jsxs(ia,{className:"text-center py-8",children:[re.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),re.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Conecta tu Wallet"}),re.jsx("p",{className:"text-gray-600",children:"Necesitas conectar tu wallet para ver las deudas"})]})},xa=()=>{const{id:a}=o(),s=n(),{isConnected:t,account:r,formatAddress:i}=Fe(),{getGroup:c,addExpense:l,deleteExpense:d,cancelExpense:m,getParticipantName:x,deleteGroup:u,isLoading:p,getTotalOwed:g}=Me(),[h,b]=e.useState(null),[f,j]=e.useState(!1),[v,_]=e.useState(!1),[C,S]=e.useState(!1),[D,P]=e.useState(""),[I,A]=e.useState(null),[F,L]=e.useState({description:"",amount:"",paidBy:r||""});e.useEffect(()=>{a&&M()},[a]);const M=async()=>{if(a){const e=await c(a);b(e)}},O=()=>{M()},B=(e,a,s)=>{A({from:e,to:a,amount:s}),S(!0)},q=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),H=e=>new Date(e).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return t?h?re.jsxs("div",{className:"max-w-4xl mx-auto",children:[re.jsxs("div",{className:"flex items-center justify-between mb-6",children:[re.jsxs("div",{className:"flex items-center space-x-4",children:[re.jsx("button",{onClick:()=>s("/"),className:"p-2 hover:bg-base-100 rounded-lg transition-colors",children:re.jsx(T,{className:"w-5 h-5 text-gray-600"})}),re.jsxs("div",{children:[re.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:h.name}),re.jsx("p",{className:"text-gray-600",children:h.description})]})]}),re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsxs("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors",children:[re.jsx(w,{className:"w-4 h-4"}),re.jsx("span",{children:"Agregar Gasto"})]}),re.jsxs("button",{onClick:async()=>{if(!a)return;if(window.confirm(`Â¿EstÃ¡s seguro de que quieres eliminar el grupo "${h?.name}"? Esta acciÃ³n no se puede deshacer.`)){await u(a)&&s("/")}},className:"flex items-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[re.jsx(G,{className:"w-4 h-4"}),re.jsx("span",{children:"Eliminar Grupo"})]})]})]}),r&&re.jsx(ma,{groupId:h.id,onPaymentCompleted:O}),r&&re.jsx("div",{"data-pending-payments":!0,children:re.jsx(na,{groupId:h.id,onPaymentCompleted:O})}),re.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[re.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-12 h-12 bg-base-100 rounded-lg flex items-center justify-center",children:re.jsx(y,{className:"w-6 h-6 text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Gastado"}),re.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q(h.totalAmount)})]})]})}),re.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-12 h-12 bg-base-100 rounded-lg flex items-center justify-center",children:re.jsx(z,{className:"w-6 h-6 text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Gastos"}),re.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.expenses.length})]})]})}),re.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-12 h-12 bg-base-100 rounded-lg flex items-center justify-center",children:re.jsx(N,{className:"w-6 h-6 text-base-600"})}),re.jsxs("div",{children:[re.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Participantes"}),re.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.participants.length})]})]})})]}),re.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6 mb-8",children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Participantes y Saldos"}),re.jsx("div",{className:"space-y-3",children:h.participants.map((e,a)=>{const s=g(h.id,e),t=x(h.id,e)||(e===r?"TÃº":"Participante");return re.jsxs("div",{className:"flex items-center justify-between p-3 bg-base-50 rounded-lg",children:[re.jsxs("div",{className:"flex items-center space-x-3",children:[re.jsx("div",{className:"w-8 h-8 bg-base-100 rounded-full flex items-center justify-center",children:re.jsx(E,{size:16,className:"text-base-600"})}),re.jsxs("div",{className:"flex-1",children:[re.jsxs("div",{className:"flex items-center space-x-2",children:[re.jsx("p",{className:"font-medium text-gray-900",children:t}),re.jsx("button",{onClick:()=>(e=>{P(e),_(!0)})(e),className:"p-1 hover:bg-base-200 rounded transition-colors",title:"Editar nombre",children:re.jsx(U,{size:14,className:"text-base-500"})})]}),re.jsx("p",{className:"text-sm text-gray-500",children:i(e)})]})]}),re.jsxs("div",{className:"flex items-center space-x-4",children:[re.jsx("div",{className:"text-right",children:re.jsx("p",{className:"font-semibold "+(s>0?"text-red-600":s<0?"text-green-600":"text-gray-600"),children:s>0?`Debe ${q(s)}`:s<0?`Le deben ${q(Math.abs(s))}`:"En balance"})}),r&&s>0&&e.toLowerCase()!==r.toLowerCase()&&re.jsxs("button",{onClick:()=>B(r,e,s),className:"flex items-center space-x-1 px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",title:"Cancelar deuda con este participante",children:[re.jsx($,{size:14}),re.jsx("span",{children:"Cancelar Deuda"})]}),r&&s<0&&e.toLowerCase()!==r.toLowerCase()&&re.jsxs("button",{onClick:()=>B(e,r,Math.abs(s)),className:"flex items-center space-x-1 px-3 py-1 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm",title:"Cancelar deuda de este participante",children:[re.jsx(k,{size:14}),re.jsx("span",{children:"Cancelar Su Deuda"})]})]})]},a)})})]}),re.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-base-200 p-6",children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Gastos"}),0===h.expenses.length?re.jsxs("div",{className:"text-center py-8",children:[re.jsx("div",{className:"w-16 h-16 bg-base-100 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx(z,{className:"w-8 h-8 text-base-500"})}),re.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay gastos aÃºn"}),re.jsx("p",{className:"text-gray-600 mb-4",children:"Agrega el primer gasto para comenzar a dividir los costos."}),re.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors",children:"Agregar Primer Gasto"})]}):re.jsx("div",{className:"space-y-4",children:h.expenses.map((e,s)=>re.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg "+("cancelled"===e.status?"bg-gray-100 border border-gray-200":"bg-base-50"),children:[re.jsxs("div",{className:"flex-1",children:[re.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[re.jsx("h4",{className:"font-medium text-gray-900",children:e.description}),"cancelled"===e.status&&re.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded-full",children:"Cancelado"})]}),re.jsxs("p",{className:"text-sm text-gray-500",children:["Pagado por: ",e.paidBy?.slice(0,6),"...",e.paidBy?.slice(-4)]}),re.jsx("p",{className:"text-sm text-gray-500",children:H(e.createdAt)}),"cancelled"===e.status&&e.cancelledAt&&re.jsxs("p",{className:"text-sm text-gray-400",children:["Cancelado: ",H(e.cancelledAt)]})]}),re.jsxs("div",{className:"flex items-center space-x-4",children:[re.jsxs("div",{className:"text-right",children:[re.jsx("p",{className:"text-lg font-semibold "+("cancelled"===e.status?"text-gray-500 line-through":"text-gray-900"),children:q(e.amount)}),re.jsxs("p",{className:"text-sm text-gray-500",children:[q(e.amount/h.participants.length)," por persona"]})]}),re.jsxs("div",{className:"flex items-center space-x-2",children:["cancelled"!==e.status&&re.jsx("button",{onClick:()=>(async e=>{if(!a)return;window.confirm("Â¿EstÃ¡s seguro de que quieres cancelar este gasto? Se marcarÃ¡ como cancelado pero se mantendrÃ¡ en el historial.")&&await m(a,e)&&M()})(e.id),className:"p-2 text-orange-500 hover:bg-orange-50 rounded-lg transition-colors",title:"Cancelar gasto",children:re.jsx($,{size:16})}),re.jsx("button",{onClick:()=>(async e=>{if(!a)return;window.confirm("Â¿EstÃ¡s seguro de que quieres eliminar este gasto? Esta acciÃ³n no se puede deshacer.")&&await d(a,e)&&M()})(e.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar gasto",children:re.jsx(G,{size:16})})]})]})]},s))})]}),re.jsx(oa,{groupId:h.id}),f&&re.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:re.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[re.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Agregar Gasto"}),re.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!a)return;const s={...F,amount:parseFloat(F.amount),paidBy:F.paidBy||r||""};await l(a,s)&&(L({description:"",amount:"",paidBy:r||""}),j(!1),M())},className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DescripciÃ³n *"}),re.jsx("input",{type:"text",value:F.description,onChange:e=>L({...F,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",placeholder:"Ej: Cena en restaurante",required:!0})]}),re.jsxs("div",{children:[re.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto (USD) *"}),re.jsx("input",{type:"number",step:"0.01",value:F.amount,onChange:e=>L({...F,amount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",placeholder:"0.00",required:!0})]}),re.jsxs("div",{children:[re.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pagado por"}),re.jsx("select",{value:F.paidBy,onChange:e=>L({...F,paidBy:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-base-500 focus:border-base-500",children:h.participants.map((e,a)=>re.jsx("option",{value:e,children:e===r?"TÃº":`${e.slice(0,6)}...${e.slice(-4)}`},a))})]}),re.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[re.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),re.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors disabled:opacity-50",children:p?"Agregando...":"Agregar Gasto"})]})]})]})}),v&&re.jsx(Ze,{groupId:h.id,address:D,currentName:x(h.id,D),onClose:()=>{_(!1),P(""),M()}}),C&&I&&re.jsx(ra,{groupId:h.id,from:I.from,to:I.to,amount:I.amount,onClose:()=>{S(!1),A(null),M()}})]}):re.jsxs("div",{className:"text-center py-12",children:[re.jsx("div",{className:"w-16 h-16 bg-base-100 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx(N,{className:"w-8 h-8 text-base-500"})}),re.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Grupo no encontrado"}),re.jsx("p",{className:"text-gray-600 mb-6",children:"El grupo que buscas no existe o no tienes acceso a Ã©l."}),re.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 bg-base-500 text-white rounded-lg hover:bg-base-600 transition-colors",children:"Volver al Dashboard"})]}):re.jsx("div",{className:"text-center py-12",children:re.jsxs("div",{className:"max-w-md mx-auto",children:[re.jsx("div",{className:"w-16 h-16 bg-base-100 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx(N,{className:"w-8 h-8 text-base-500"})}),re.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Conecta tu Wallet"}),re.jsx("p",{className:"text-gray-600",children:"Necesitas conectar tu wallet para ver los detalles del grupo."})]})})};function ua(){return re.jsx(Je,{children:re.jsxs(i,{children:[re.jsx(c,{path:"/",element:re.jsx(Ke,{})}),re.jsx(c,{path:"/create-group",element:re.jsx(Xe,{})}),re.jsx(c,{path:"/group/:id",element:re.jsx(xa,{})}),re.jsx(c,{path:"*",element:re.jsx("div",{children:"404 - Page Not Found"})})]})})}ne.createRoot(document.getElementById("root")).render(re.jsx(s.StrictMode,{children:re.jsx(l,{children:re.jsx(qe,{children:re.jsx(Ae,{children:re.jsxs(Ue,{children:[re.jsx(ua,{}),re.jsx(M,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#f9fafb",border:"1px solid #374151",borderRadius:"12px",fontSize:"14px",fontWeight:"500"},success:{iconTheme:{primary:"#10b981",secondary:"#f9fafb"}},error:{iconTheme:{primary:"#ef4444",secondary:"#f9fafb"}},loading:{iconTheme:{primary:"#0052FF",secondary:"#f9fafb"}}}})]})})})})}));
